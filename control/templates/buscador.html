<!-- buscador.html -->
<form method="get" class="row gy-2 gx-2 align-items-end py-3">

  <!-- Filtro por texto -->
  <div class="col-12 col-md flex-grow-1">
    <div class="input-group input-group-sm">
      <input type="text" class="form-control" name="q" placeholder="Buscar..." value="{{ request.GET.q }}">
      <button type="submit" class="btn btn-primary">Buscar</button>
    </div>
  </div>

  <!-- Filtro por lugar (opcional) -->
  {% if lugares %}
    <div class="col-6 col-md-auto">
      <select name="lugar" class="form-select form-select-sm">
        <option value="todos">Todos los lugares</option>
        {% for lugar in lugares %}
          <option value="{{ lugar.id }}" {% if lugar.id|stringformat:"s" == lugar_actual %}selected{% endif %}>
            {{ lugar.nombre|default:"(Sin nombre)" }}
          </option>
        {% endfor %}
      </select>
    </div>
  {% endif %}

  <!-- Filtro por estado (opcional) -->
  {% if mostrar_estado %}
    <div class="col-6 col-md-auto">
      <select name="estado" class="form-select form-select-sm">
        <option value="pendientes" {% if estado_actual == 'pendientes' %}selected{% endif %}>Pendientes</option>
        <option value="pagadas" {% if estado_actual == 'pagadas' %}selected{% endif %}>Pagadas</option>
        <option value="todas" {% if estado_actual == 'todas' %}selected{% endif %}>Todas</option>
      </select>
    </div>
  {% endif %}

  <!-- Cantidad por página -->
  {% if cantidades_por_pagina %}
    <div class="col-6 col-md-auto">
      <select name="per_page" class="form-select form-select-sm">
        {% for cantidad in cantidades_por_pagina %}
          <option value="{{ cantidad }}" {% if cantidad == per_page_actual %}selected{% endif %}>
            {{ cantidad }} por página
          </option>
        {% endfor %}
      </select>
    </div>
  {% endif %}

</form>
